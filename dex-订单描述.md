1. 一笔订单创建时，会在账户中冻结如下两种资金：
	*	订单本身需要交易的资金
	* 订单完全成交时的佣金；
2. 订单的创建需要满足的额外条件
	*	该笔订单的佣金必须要大于等于 0.01cet(1000000sato.CET)
	* 0.01cet的最小佣金限制：是在节点部署时进行配置的；属于全网共识的一部分。后面可以通过提案进行修改。
2. 订单佣金的计算
	*	时机：订单的佣金是在创建成功时，计算出来，并以冻结的方式将这部分资金冻结在账户中；直到订单从节点的订单薄中删除时，会按照订单的实际成交量，扣除部分或全部佣金，剩余的佣金返还给用户. 
	* 创建订单时佣金的计算：`订单成交的cet金额 * 佣金率(主网启动时配置，如0.1%)`
		* 查询该订单stock与cet交易对的最近成交价；
			* 当最新成交价为0时，冻结固定的佣金(在主网上线时进行设置)；
			* 当最新成交价不为0时，使用 `最新成交价 * 订单的数量 * 佣金率` 作为该笔订单的佣金
17. 佣金的收取
	*	佣金的收取有两种情况：订单有成交、订单完全无成交
		* 订单有成交：收取实际成交的手续费; 即：`成交的数量/挂单的数量*订单创建时冻结的佣金`
		* 订单完全无成交：收取固定的手续费；当前为：1000000sato.CET
3. 撮合成交后实际佣金的扣除是按实际成交额来算的么？
	* 订单有撮合时，实际佣金的扣除是 `按实际成交量/订单的下单量 * 冻结的佣金 `来计算的.
	* 如果订单没有任何成交，则扣除指定的佣金 1000000 sato.cet
	* 佣金扣除的时机：在该笔订单从节点的订单薄中删除时，此时会对佣金进行结算.
4. 冻结的撮合佣金会因为实际成交价不同而不同么？
	*	不会; 佣金的计算查看 `条目2`
5. 订单的删除有四种情况：
	* 手动发交易进行删除
	* 订单到期删除
	* 订单被完成成交时删除
	* 订单中冻结的资金不足以支付订单中剩余 stock的成交；
		* 这种情况只有在买单中可能发生；买单中会冻结一笔资金作为订单本身的资金(这笔资金是按：`订单设定的价格 * 下单的数量`向上取整计算出来的)； 在订单的成交过程中，一笔订单存在多次才可以成交完成的情况，每次成交时的资金(按 `当前成交的数量 * 当前的成交价格`向下取整 计算出来)；出于防御性编程的目的，增加了这种条件，当订单的冻结资金不足以支付订单中剩余的数量时，这个订单也会被从订单薄中删除(理论上这种情况不存在)
		* 对于买单，每次的成交价 <= 订单的价格； 
		* 对于卖单，每次的成交价 >= 订单的价格；
6. 在删除时，收取的手续费有如下两种情况：
	* 订单未进行任何成交
		*  当未进行任何成交时，会收取一笔固定的费用；(由主网上线时进行配置)。
	* 订单部分成交或全部成交
		*  当订单存在成交时，会按成交的比例收取一定的费用；比如：这笔订单创建时，锁定了1cet作为交易佣金，然后在订单删除时，发现该笔订单成交了1/4， 则会收取 (1/4) * 1cet = 0.25cet
7. 订单的功能费标准
	*	对于GTE类型的订单： 当订单在dex上存储的时间为[0,100000]区块时，不收取功能费；
GTE Order在超过100000个区块之后, 每个区块收取10sato.CET.
8. gte类型的订单，如何设置过期时间？	
	*	分为两种情况
		* 用户设置了过期区块数(如，保存20000个区块)，按照用户设置的区块数来存储订单
		* 用户未进行设置，按照默认值(100000个区块)来存储订单
9. 交易自身的fees `= gas * gasPrice`的收取
	* 当一笔交易被打包在区块中时，就会收取这笔交易的 fees.
10. 资产在钱包中会存在哪几种状态
	*  dex上的资产分为两类：CET、非CET的token
		*  CET存在这几种状态: 可用、锁定(锁定转账)、冻结(下单冻结)、已委托、撤销委托中
		*  非CET的token： 可用、锁定(锁定转账)、冻结(下单冻结)
11. 订单的删除

	*	IOC订单的删除：节点中每个区块执行完成后，会立即删除IOC订单
	* GTE订单的删除：节点中对于每个GTE订单都设置了过期的时间(由exist-block 参数指定：该订单在指定多少个块后从节点中删除)；当每个GTE订单过期时，节点会统一在每天的UTC午夜时间，删除这些订单。
		* 注意: 假如一个订单已经过期，但是此时节点的区块时间还不到午夜UTC，这个订单是不会删除的，仍然会留存在区块中，进行成交。
12. 计算订单时价格的参考比例

	* Dex中订单的成交时，会依据上个区块中的交易对的成交价，上下浮动一个指定的比例(当前25%)，作为本轮订单成交的价格区间。会在该价格区间选择可以成交的订单的进行成交，如果订单的价格不在该区间，则本次区块的执行过程中，订单不会成交。
15. 涉及到的精度

*	主要分为三种： 交易对的价格精度， 交易对的订单精度， 订单的价格精度； 这三种精度，分别具有不同的含义。
* 交易对的价格精度
	
	* 设置：作为交易对的属性，在创建交易对时，进行设置； 同时也允许发送交易，修改交易对的该属性值，但是 设置的交易对的新价格精度不可以比交易对旧价格精度小。
	* 有效范围：[0,18]
	* 作用：限制该交易对的订单价格精度的最大值。
* 订单价格精度

	* 	设置：在创建订单的时候进行设置。订单创建后，不允许进行修改。
	* 有效范围: [0, 交易对的价格精度]
	* 作用：用来计算订单的实际价格: actualPrice = price / 10^<sup>price_precison</sup>; 
* 交易对的订单精度
	
	* 设置： 在交易对创建时，进行设置；作为交易对的属性。 交易对创建后，不允许进行修改。
	* 有效范围: [0, 8]; 设定的值超出8时，都将它视为0;	 以cet为例进行说明：
		* 0: 表示订单的数量必须为`1sato.CET`的整数倍
		* 1: 表示订单的数量必须为`10sato.CET`的整数倍
		* 2: 表示订单的数量必须为`100sato.CET`的整数倍
		* ....
		* 8: 表示订单的数量必须为`1CET`的整数倍
	* 作用: 设置订单交易数量的粒度。交易的数量必须为指定粒度的整数倍.
	* 该属性主要针对于 特殊token的交易需求； 例如某种房子映射的token，交易时，希望整栋房子、整栋房子的进行交易，即交易的数量必须为 1个token的整数倍。
	* 在默认订单精度为0的情况下，可以交易的token 数量恰好为 最小的token精度；
16. 订单撮合，设计到的数值问题：
17. 佣金的收取

*	佣金的收取有两种情况：订单有成交、订单完全无成交
	* 订单有成交：收取实际成交的手续费; 即：`成交的数量/挂单的数量*订单创建时冻结的佣金`
	* 订单完全无成交：收取固定的手续费；当前为：1000000sato.CET
18. 下线交易对

*	 用户可以设置交易对的下线时间；代码中硬编码设置：交易对的下线时间必须最少为当前时间的一周后；示例如下：
	
	*	在某个区块中有个下线交易对的交易，设置的交易对的下线时间为 T1；
	*	区块的时间戳block-time，为T0;
	*	T1 - T0 >= 7天。





---------------

参数解释

查询订单时，返回的字段信息解释

```
{
  "type": "market/Order",
  "value": {
    "sender": "coinex1wcx8fe4wg77sqqdrfculu6wamud3dd4jfw7cwc",
    "sequence": "4",
    "identify": 1,
    "trading_pair": "abc/cet",
    "order_type": 2,
    "price": "0.005200000000000000",
    "quantity": "10000000",
    "side": 1,
    "time_in_force": "3",
    "height": "32",
    "frozen_fee": "1000000",
    "exist_blocks": "5",
    "left_stock": "10000000",
    "freeze": "52000",
    "deal_stock": "0",
    "deal_money": "0"
  }
}
```
`height` : 订单的创建高度 

`sender ` : 创建订单的用户地址

`sequence` : 用户地址的sequence，作为订单ID组成的一部分

`identify` : 订单在一个交易中的唯一标识，用于组成订单ID(因为一个交易可以创建多笔订单)； 

`order-id` : 订单ID，有三部分组成， 用户地址,用户sequence,订单的identify

`trading_pair `: 订单的交易对

`price `: 订单的价格

`time_in_force` : 标识订单属于GTE还是IOC 

* 3 : GTE 订单
* 4 : IOC 订单

`order_type ` : 标识订单类型(限价单还是市价单)；当前dex只支持限价单

* 2 : 限价单	

`side ` : 订单的方向；(买/卖)

*	买 : 1
* 卖 : 2

`frozen_fee ` : 订单冻结的佣金，币种为cet

`used_commission`: 订单成交支付的佣金；在订单删除时，从用户冻结的`frozen_fee `属性中进行扣除.

`remain_amount`, `freeze`: 订单剩余未成交的本金，在订单从链上删除时，退还给用户

`left_stock ` : 订单剩余未成交的量

`DealStock`, `DealMoney` : 订单累计成交的量

`deal_money` : 订单累计成交的金额(以money的数量来显示、)

`feature_fee` : 订单的功能费；查看上述(7)对功能费的描述

`identify`: 标识一个交易中每个订单消息的唯一性。 因为一笔交易中可能存在多个创建订单的消息，所以在每个创建的订单的消息中，加入 identify 字段，标示这个订单在这笔交易中的唯一性。

订单ID由三部分组成：userAddr、userSequence、identify； 组成方式为 `userSequence-(userSequence * (2 ** 8))+identify`两部分链接组成.


TODO. 将会对订单返回的字段中的数字进行文本化描述.










	
